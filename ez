-- Preload all sounds at the start for zero delay
local sounds = {
    Move1 = "MAFIOSOMOVE1.mp3", -- Sound for Move 1
    Move2 = "MAFIOSOMOVE2.mp3", -- Sound for Move 2 and Move 5
    Move3 = "MAFIOSOMOVE3.mp3", -- Sound for Move 3
    Move4 = "MAFIOSOMOVE4.mp3",      -- Sound for Move 4
    Move6 = "MAFIOSOULT.mp3"  -- Sound for Move 6
}

-- Function to preload all sounds from GitHub
local function PreloadSounds()
    for _, soundFile in pairs(sounds) do
        local url = "https://github.com/kaktusik3308/rizzohio/raw/refs/heads/main/" .. soundFile
        writefile(soundFile, game:HttpGet(url))
    end
    print("All sounds preloaded successfully!")
end

PreloadSounds() -- Call to preload sounds

-- Function to play animation and sound simultaneously for each move
local function PlayAnimWithSound(animId, customAnimId, soundFile)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")

    -- Listen for the specific animation being played
    humanoid.AnimationPlayed:Connect(function(animationTrack)
        if animationTrack.Animation.AnimationId == "rbxassetid://" .. animId then

            -- Stop any currently playing animations
            for _, animTrack in pairs(humanoid:GetPlayingAnimationTracks()) do
                animTrack:Stop()
            end

            -- Create and load the custom animation
            local customAnim = Instance.new("Animation")
            customAnim.AnimationId = "rbxassetid://" .. customAnimId
            local customAnimTrack = humanoid:LoadAnimation(customAnim)
            customAnimTrack:Play()

            -- Create and play the preloaded sound instantly
            local sound = Instance.new("Sound")
            sound.SoundId = getcustomasset(soundFile)
            sound.Volume = 1
            sound.Parent = character
            sound:Play()

            -- Stop the animation when the sound finishes
            sound.Ended:Connect(function()
                customAnimTrack:Stop()
            end)
        end
    end)
end

-- Move 1 Configuration
-- Triggers when animation ID 12273188754 is played
-- Plays custom animation 14046756619 and sound MAFIOSOMOVE1.mp3
PlayAnimWithSound(12273188754, 14046756619, sounds.Move1)

-- Move 2 Configuration
-- Triggers when animation ID 12296113986 is played
-- Plays custom animation 17838006839 and sound MAFIOSOMOVE2.mp3
PlayAnimWithSound(12296113986, 17838006839, sounds.Move2)

-- Move 3 Configuration
-- Triggers when animation ID 12309835105 is played
-- Plays custom animation 18896127525 and sound MAFIOSOMOVE3.mp3
PlayAnimWithSound(12309835105, 18896127525, sounds.Move3)

-- Move 4 Configuration
-- Triggers when animation ID 13603396939 is played
-- Plays custom animation 102938209711074 and sound MAFIOSO.mp3
PlayAnimWithSound(13603396939, 102938209711074, sounds.Move4)

-- Move 5 Configuration
-- Triggers when animation ID 16310343179 is played
-- Plays custom animation 15944317351 and reuses sound MAFIOSOMOVE2.mp3 from Move 2
PlayAnimWithSound(16310343179, 15944317351, sounds.Move2)

-- Move 6 Configuration
-- Triggers when animation ID 12342141464 is played
-- Plays custom animation 102938209711074 and sound MAFIOSOSPAWN.mp3
PlayAnimWithSound(12342141464, 13716964686, sounds.Move6)
